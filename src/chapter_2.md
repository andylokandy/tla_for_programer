
##

这张图中每一个圆代表一个系统的状态；系统一定有一个初始状态，从初始状态态出发，沿着箭头直到尽头的一条路径称为一个 Behavior。对于有环的状态空间，回到自身的路径也是 Behavior。

状态空间中如果存在我们不希望出现的状态，比如出现了








分布式的核心问题在于：

1. 系统拥有全局状态
2. 节点将全局状态本地化

第 1 点是由一致性要求的，我们不会希望因为一小会的网络延迟而丢失了工资卡上的余额；无论从哪个 ATM 查询，我们的工资卡的余额都应该是一个相同的数字。第 2 点是由分布式导致的，全局状态要是由一个节点保存，那它就是个中心化系统，分布式系统必然会让节点各自维护全局状态的副本。

全局状态

在设计分布式系统时，要时刻思考

网络分区、网络延迟、节点宕机让全局状态与本地状态副本发生了不一致。但这其实不是充分条件，没有网络问题一样可以发生不一致，我们来看一个编程领域经典的多线程问题：


单线程的程序一旦出现错误便会停机，多线程